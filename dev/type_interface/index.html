<!DOCTYPE html>
<html lang="en"><head><meta charset="UTF-8"/><meta name="viewport" content="width=device-width, initial-scale=1.0"/><title>Type parameters · TypeParameterAccessors.jl</title><meta name="title" content="Type parameters · TypeParameterAccessors.jl"/><meta property="og:title" content="Type parameters · TypeParameterAccessors.jl"/><meta property="twitter:title" content="Type parameters · TypeParameterAccessors.jl"/><meta name="description" content="Documentation for TypeParameterAccessors.jl."/><meta property="og:description" content="Documentation for TypeParameterAccessors.jl."/><meta property="twitter:description" content="Documentation for TypeParameterAccessors.jl."/><meta property="og:url" content="https://itensor.github.io/TypeParameterAccessors.jl/type_interface/"/><meta property="twitter:url" content="https://itensor.github.io/TypeParameterAccessors.jl/type_interface/"/><link rel="canonical" href="https://itensor.github.io/TypeParameterAccessors.jl/type_interface/"/><script data-outdated-warner src="../assets/warner.js"></script><link href="https://cdnjs.cloudflare.com/ajax/libs/lato-font/3.0.0/css/lato-font.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/juliamono/0.050/juliamono.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/fontawesome.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/solid.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/brands.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.16.8/katex.min.css" rel="stylesheet" type="text/css"/><script>documenterBaseURL=".."</script><script src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.6/require.min.js" data-main="../assets/documenter.js"></script><script src="../search_index.js"></script><script src="../siteinfo.js"></script><script src="../../versions.js"></script><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../assets/themes/catppuccin-mocha.css" data-theme-name="catppuccin-mocha"/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../assets/themes/catppuccin-macchiato.css" data-theme-name="catppuccin-macchiato"/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../assets/themes/catppuccin-frappe.css" data-theme-name="catppuccin-frappe"/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../assets/themes/catppuccin-latte.css" data-theme-name="catppuccin-latte"/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../assets/themes/documenter-dark.css" data-theme-name="documenter-dark" data-theme-primary-dark/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../assets/themes/documenter-light.css" data-theme-name="documenter-light" data-theme-primary/><script src="../assets/themeswap.js"></script><link href="../assets/favicon.ico" rel="icon" type="image/x-icon"/><link href="../assets/extras.css" rel="stylesheet" type="text/css"/></head><body><div id="documenter"><nav class="docs-sidebar"><a class="docs-logo" href="../"><img class="docs-light-only" src="../assets/logo.png" alt="TypeParameterAccessors.jl logo"/><img class="docs-dark-only" src="../assets/logo-dark.png" alt="TypeParameterAccessors.jl logo"/></a><div class="docs-package-name"><span class="docs-autofit"><a href="../">TypeParameterAccessors.jl</a></span></div><button class="docs-search-query input is-rounded is-small is-clickable my-2 mx-auto py-1 px-2" id="documenter-search-query">Search docs (Ctrl + /)</button><ul class="docs-menu"><li><a class="tocitem" href="../">Home</a></li><li class="is-active"><a class="tocitem" href>Type parameters</a><ul class="internal"><li><a class="tocitem" href="#Type-Parameters"><span>Type Parameters</span></a></li><li><a class="tocitem" href="#Setting-Type-Parameters"><span>Setting Type Parameters</span></a></li><li><a class="tocitem" href="#Specifying-and-Unspecifying-Type-Parameters"><span>Specifying and Unspecifying Type Parameters</span></a></li><li><a class="tocitem" href="#Default-Type-Parameters"><span>Default Type Parameters</span></a></li></ul></li><li><a class="tocitem" href="../lib/">Library</a></li></ul><div class="docs-version-selector field has-addons"><div class="control"><span class="docs-label button is-static is-size-7">Version</span></div><div class="docs-selector control is-expanded"><div class="select is-fullwidth is-size-7"><select id="documenter-version-selector"></select></div></div></div></nav><div class="docs-main"><header class="docs-navbar"><a class="docs-sidebar-button docs-navbar-link fa-solid fa-bars is-hidden-desktop" id="documenter-sidebar-button" href="#"></a><nav class="breadcrumb"><ul class="is-hidden-mobile"><li class="is-active"><a href>Type parameters</a></li></ul><ul class="is-hidden-tablet"><li class="is-active"><a href>Type parameters</a></li></ul></nav><div class="docs-right"><a class="docs-navbar-link" href="https://github.com/ITensor/TypeParameterAccessors.jl" title="View the repository on GitHub"><span class="docs-icon fa-brands"></span><span class="docs-label is-hidden-touch">GitHub</span></a><a class="docs-navbar-link" href="https://github.com/ITensor/TypeParameterAccessors.jl/blob/main/docs/src/type_interface.md" title="Edit source on GitHub"><span class="docs-icon fa-solid"></span></a><a class="docs-settings-button docs-navbar-link fa-solid fa-gear" id="documenter-settings-button" href="#" title="Settings"></a><a class="docs-article-toggle-button fa-solid fa-chevron-up" id="documenter-article-toggle-button" href="javascript:;" title="Collapse all docstrings"></a></div></header><article class="content" id="documenter-page"><h1 id="Type-interface"><a class="docs-heading-anchor" href="#Type-interface">Type interface</a><a id="Type-interface-1"></a><a class="docs-heading-anchor-permalink" href="#Type-interface" title="Permalink"></a></h1><p>The low-level interface of this package is centered around the ability to <em>get</em>, <em>set</em> and <em>specify</em> the type parameters of a given type.</p><h2 id="Type-Parameters"><a class="docs-heading-anchor" href="#Type-Parameters">Type Parameters</a><a id="Type-Parameters-1"></a><a class="docs-heading-anchor-permalink" href="#Type-Parameters" title="Permalink"></a></h2><p>The central concept in this package is a type parameter, which refers to the variables <code>A, B, ...</code> in type definitions:</p><pre><code class="language-julia hljs">abstract type Foo{A,B,C,D} end
struct Bar{A,B,C,D} end</code></pre><p>In order to retrieve these parameters, <a href="../lib/#TypeParameterAccessors.type_parameters"><code>type_parameters</code></a> can be used, either to retrieve all parameters, or a single one:</p><pre><code class="language-julia-repl hljs" style="display:block;">julia&gt; type_parameters(Foo{1,2,3,4})</code><code class="nohighlight hljs ansi" style="display:block;">(1, 2, 3, 4)</code><br/><code class="language-julia-repl hljs" style="display:block;">julia&gt; type_parameters(Foo{1,2,3,4}, 2)</code><code class="nohighlight hljs ansi" style="display:block;">2</code><br/><code class="language-julia-repl hljs" style="display:block;">julia&gt; type_parameters(Bar{:A,Int,2,Foo})</code><code class="nohighlight hljs ansi" style="display:block;">(:A, Int64, 2, Main.Foo)</code><br/><code class="language-julia-repl hljs" style="display:block;">julia&gt; type_parameters(Bar{:A,Int,2,Foo}, 4)</code><code class="nohighlight hljs ansi" style="display:block;">Main.Foo</code></pre><div class="admonition is-warning"><header class="admonition-header">Warning</header><div class="admonition-body"><p>For consistency reasons, as well as due to the type system in Julia, these positions will always refer to the <em>base type</em>. This means in particular that using positional type parameters in combination with type aliases can lead to unexpected results. For example, <code>const Foo_alias{D,C,B,A} = Foo{A,B,C,D}</code> would still have <code>type_parameters(Foo_alias) == (A, B, C, D)</code>.</p></div></div><p>In order to effectively pass on the information about <em>which</em> type parameter we want to manipulate, it can often be convenient to refer to type parameters not by their position, but rather by their meaning. In particular, this allows users to write more generic code, since the positions of type parameters have no special meaning in the Julia type system. Additionally, this avoids the unexpected results caused by type aliases. Often, these parameters have an associated function to retrieve them, such as <code>eltype</code> or <code>ndims</code>. Therefore, the following syntax is also supported (and in general preferred):</p><pre><code class="language-julia-repl hljs" style="display:block;">julia&gt; type_parameters(Array{Int,2}, ndims)</code><code class="nohighlight hljs ansi" style="display:block;">2</code><br/><code class="language-julia-repl hljs" style="display:block;">julia&gt; type_parameters(Vector{Float64}, eltype)</code><code class="nohighlight hljs ansi" style="display:block;">Float64</code></pre><p>This can not automatically be inferred for custom types however:</p><pre><code class="language-julia-repl hljs" style="display:block;">julia&gt; type_parameters(Bar{1}, ndims) # errors because `ndims` is not registered</code><code class="nohighlight hljs ansi" style="display:block;">ERROR: StackOverflowError:</code></pre><p>In order to support this, we internally pass everything through <a href="../lib/#TypeParameterAccessors.position"><code>position</code></a>, which can be used to bind functions to positions. For type stability reasons, it is beneficial to return the static <a href="../lib/#TypeParameterAccessors.Position"><code>TypeParameterAccessors.Position</code></a> instead of a regular integer.</p><pre><code class="language-julia-repl hljs" style="display:block;">julia&gt; TypeParameterAccessors.position(::Type{&lt;:Bar}, ::typeof(ndims)) = TypeParameterAccessors.Position(1)</code><br/><code class="language-julia-repl hljs" style="display:block;">julia&gt; type_parameters(Bar{1}, ndims)</code><code class="nohighlight hljs ansi" style="display:block;">1</code></pre><div class="admonition is-warning"><header class="admonition-header">Warning</header><div class="admonition-body"><p>While it might be tempting to define such functions for abstract types, this is in general not a good practice. The reason for this is again that the position of a specific type parameter is not something that is inherited by subtypes, which may decide to change the number as well as the order of the type parameters.</p></div></div><h2 id="Setting-Type-Parameters"><a class="docs-heading-anchor" href="#Setting-Type-Parameters">Setting Type Parameters</a><a id="Setting-Type-Parameters-1"></a><a class="docs-heading-anchor-permalink" href="#Setting-Type-Parameters" title="Permalink"></a></h2><p>In a similar manner, it is also possible to alter the type parameters of a given type. That functionality is provided by <a href="../lib/#TypeParameterAccessors.set_type_parameters"><code>set_type_parameters</code></a>:</p><pre><code class="language-julia-repl hljs" style="display:block;">julia&gt; set_type_parameters(Foo{1,2,3}, 4, :four)</code><code class="nohighlight hljs ansi" style="display:block;">Main.Foo{1, 2, 3, :four}</code><br/><code class="language-julia-repl hljs" style="display:block;">julia&gt; set_type_parameters(Foo{1,2,3,4}, (1,3), (:A, :B))</code><code class="nohighlight hljs ansi" style="display:block;">Main.Foo{:A, 2, :B, 4}</code></pre><h2 id="Specifying-and-Unspecifying-Type-Parameters"><a class="docs-heading-anchor" href="#Specifying-and-Unspecifying-Type-Parameters">Specifying and Unspecifying Type Parameters</a><a id="Specifying-and-Unspecifying-Type-Parameters-1"></a><a class="docs-heading-anchor-permalink" href="#Specifying-and-Unspecifying-Type-Parameters" title="Permalink"></a></h2><p>Finally, sometimes it is either required or useful to work with <code>UnionAll</code> types. These have type parameters that are either not specified or only bounded. For example, <code>Foo</code> is really a shorthand form of <code>Foo{A,B,C,D} where {A,B,C,D}</code>. Starting from a <em>specified</em> type, you can go back to the unspecified form by unspecifying either some or all of the type parameters through <a href="../lib/#TypeParameterAccessors.unspecify_type_parameters"><code>unspecify_type_parameters</code></a>.</p><pre><code class="language-julia-repl hljs" style="display:block;">julia&gt; unspecify_type_parameters(Foo{1,2,3,4})</code><code class="nohighlight hljs ansi" style="display:block;">Main.Foo</code><br/><code class="language-julia-repl hljs" style="display:block;">julia&gt; unspecify_type_parameters(Foo{1,2,3,4}, 1)</code><code class="nohighlight hljs ansi" style="display:block;">Main.Foo{A, 2, 3, 4} where A</code><br/><code class="language-julia-repl hljs" style="display:block;">julia&gt; unspecify_type_parameters(Foo{1,2,3,4}, (1, 3))</code><code class="nohighlight hljs ansi" style="display:block;">Main.Foo{A, 2, C, 4} where {A, C}</code></pre><p>Similarly, it is possible to set type parameters that have not been fully specified through <a href="../lib/#TypeParameterAccessors.specify_type_parameters"><code>specify_type_parameters</code></a>.</p><pre><code class="language-julia-repl hljs" style="display:block;">julia&gt; specify_type_parameter(Foo{1,2,3}, 4, 4)</code><code class="nohighlight hljs ansi" style="display:block;">ERROR: UndefVarError: `specify_type_parameter` not defined in `Main`
Suggestion: check for spelling errors or missing imports.</code><br/><code class="language-julia-repl hljs" style="display:block;">julia&gt; specify_type_parameters(Foo, (1, 2), (:A, Int))</code><code class="nohighlight hljs ansi" style="display:block;">Main.Foo{:A, Int64}</code></pre><p>Note that this function differs from <a href="../lib/#TypeParameterAccessors.set_type_parameters"><code>set_type_parameters</code></a> only by ignoring type parameters that have not been specified:</p><pre><code class="language-julia-repl hljs" style="display:block;">julia&gt; set_type_parameters(Foo{1,2,3}, (1, 4), (Int, Int))</code><code class="nohighlight hljs ansi" style="display:block;">Main.Foo{Int64, 2, 3, Int64}</code><br/><code class="language-julia-repl hljs" style="display:block;">julia&gt; specify_type_parameters(Foo{1,2,3}, (1, 4), (Int, Int))</code><code class="nohighlight hljs ansi" style="display:block;">Main.Foo{1, 2, 3, Int64}</code></pre><h2 id="Default-Type-Parameters"><a class="docs-heading-anchor" href="#Default-Type-Parameters">Default Type Parameters</a><a id="Default-Type-Parameters-1"></a><a class="docs-heading-anchor-permalink" href="#Default-Type-Parameters" title="Permalink"></a></h2><p>Finally, it can sometimes be convenient to have default values for type parameters. This can be achieved by registering the default values through <a href="../lib/#TypeParameterAccessors.default_type_parameters"><code>default_type_parameters</code></a>, and then setting or specifying them through <a href="../lib/#TypeParameterAccessors.set_default_type_parameters"><code>set_default_type_parameters</code></a> and <a href="../lib/#TypeParameterAccessors.specify_default_type_parameters"><code>specify_default_type_parameters</code></a>.</p><pre><code class="language-julia-repl hljs" style="display:block;">julia&gt; TypeParameterAccessors.default_type_parameters(::Type{&lt;:Bar}) = (1, 2, 3, 4)</code><br/><code class="language-julia-repl hljs" style="display:block;">julia&gt; set_default_type_parameters(Bar)</code><code class="nohighlight hljs ansi" style="display:block;">Main.Bar{1, 2, 3, 4}</code><br/><code class="language-julia-repl hljs" style="display:block;">julia&gt; specify_default_type_parameters(Bar{1,2}, (3, 4))</code><code class="nohighlight hljs ansi" style="display:block;">Main.Bar{1, 2, 3, 4}</code></pre></article><nav class="docs-footer"><a class="docs-footer-prevpage" href="../">« Home</a><a class="docs-footer-nextpage" href="../lib/">Library »</a><div class="flexbox-break"></div><p class="footer-message">Powered by <a href="https://github.com/JuliaDocs/Documenter.jl">Documenter.jl</a> and the <a href="https://julialang.org/">Julia Programming Language</a>.</p></nav></div><div class="modal" id="documenter-settings"><div class="modal-background"></div><div class="modal-card"><header class="modal-card-head"><p class="modal-card-title">Settings</p><button class="delete"></button></header><section class="modal-card-body"><p><label class="label">Theme</label><div class="select"><select id="documenter-themepicker"><option value="auto">Automatic (OS)</option><option value="documenter-light">documenter-light</option><option value="documenter-dark">documenter-dark</option><option value="catppuccin-latte">catppuccin-latte</option><option value="catppuccin-frappe">catppuccin-frappe</option><option value="catppuccin-macchiato">catppuccin-macchiato</option><option value="catppuccin-mocha">catppuccin-mocha</option></select></div></p><hr/><p>This document was generated with <a href="https://github.com/JuliaDocs/Documenter.jl">Documenter.jl</a> version 1.10.2 on <span class="colophon-date" title="Thursday 1 May 2025 04:24">Thursday 1 May 2025</span>. Using Julia version 1.11.5.</p></section><footer class="modal-card-foot"></footer></div></div></div></body></html>
